[tox]
envlist = py39, py310, py311, py312
isolated_build = True
skip_missing_interpreters = True
requires =
    tox>=4.0
    setuptools>=65.0
    pip>=23.0
    wheel

[testenv]
setenv =
    PYTHONPATH = {toxinidir}/src
    SVF_MOCK_MODE = 1
deps =
    -r requirements.txt
    pytest>=7.1.1
    pytest-cov>=5.0
    ruff>=0.4.2
commands =
    ruff check src tests
    pytest --cov=src --cov-report=term-missing --cov-report=xml {posargs:tests}

[testenv:lint]
deps = 
    ruff>=0.4.2
    mypy>=1.8.0
commands =
    ruff check src tests
    ruff format --check src tests
    mypy src

[testenv:format]
deps = 
    ruff>=0.4.2
commands =
    ruff format src tests
    ruff check --fix src tests

[testenv:docs]
deps =
    sphinx>=4.0.0
    sphinx-rtd-theme>=1.0.0
    myst-parser>=0.18.1
commands =
    sphinx-build -b html docs docs/_build/html

[coverage:run]
source = src

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if self.debug:
    raise NotImplementedError
    if __name__ == .__main__.:
    pass
    raise ImportError

# Ruff configuration moved to pyproject.toml